Aby skonfigurowaÄ‡ Jest w wersji 29.7.0 (nie ma wersji 19.7.0 â€“ prawdopodobnie chodziÅ‚o Ci o 29.7.0, ktÃ³ra jest najnowszÄ… wersjÄ… Jest z serii 29), z frameworkiem Vite + React, naleÅ¼y zastosowaÄ‡ siÄ™ do kilku krokÃ³w. Vite nie uÅ¼ywa Jest natywnie, wiÄ™c konfiguracja wymaga dodatkowych narzÄ™dzi, takich jak vite-jest (eksperymentalne) lub bardziej stabilnie â€“ jest + babel + @testing-library/react.

â¸»

âœ… Konfiguracja Jest 29.7.0 dla Vite + React (z Babel)

1. Zainstaluj zaleÅ¼noÅ›ci:

npm install --save-dev jest@29.7.0 babel-jest @babel/preset-env @babel/preset-react @testing-library/react @testing-library/jest-dom

Opcjonalnie, jeÅ›li uÅ¼ywasz TypeScript:

npm install --save-dev ts-jest @types/jest


â¸»

2. Skonfiguruj babel.config.js:

// babel.config.js
module.exports = {
  presets: [
    '@babel/preset-env',
    ['@babel/preset-react', { runtime: 'automatic' }],
  ],
};


â¸»

3. StwÃ³rz plik jest.config.js:

JeÅ›li uÅ¼ywasz JavaScript:

// jest.config.js
module.exports = {
  testEnvironment: 'jsdom',
  moduleNameMapper: {
    '^~/(.*)$': '<rootDir>/src/$1',
    '\\.(css|less|scss|sass)$': 'identity-obj-proxy'
  },
  setupFilesAfterEnv: ['<rootDir>/jest.setup.js'],
  transform: {
    '^.+\\.jsx?$': 'babel-jest',
  },
};

JeÅ›li uÅ¼ywasz TypeScript:

// jest.config.js
module.exports = {
  preset: 'ts-jest',
  testEnvironment: 'jsdom',
  moduleNameMapper: {
    '^~/(.*)$': '<rootDir>/src/$1',
    '\\.(css|less|scss|sass)$': 'identity-obj-proxy'
  },
  setupFilesAfterEnv: ['<rootDir>/jest.setup.ts'],
};


â¸»

4. StwÃ³rz plik jest.setup.js lub jest.setup.ts:

// jest.setup.js
import '@testing-library/jest-dom';


â¸»

5. PrzykÅ‚ad testu:

// src/components/Hello.test.jsx
import { render, screen } from '@testing-library/react';
import Hello from './Hello';

test('renders hello message', () => {
  render(<Hello />);
  expect(screen.getByText(/hello/i)).toBeInTheDocument();
});


â¸»

6. Dodaj skrypt do package.json:

"scripts": {
  "test": "jest"
}


â¸»

ğŸ§ª Uruchamianie testÃ³w

npm run test


â¸»

JeÅ›li chcesz uÅ¼ywaÄ‡ nowoczesnej alternatywy jak vitest, ktÃ³ra integruje siÄ™ lepiej z Vite, mogÄ™ Ci teÅ¼ jÄ… rozkonfigurowaÄ‡. Ale jeÅ›li chcesz trzymaÄ‡ siÄ™ Jest 29.7.0, powyÅ¼sza konfiguracja bÄ™dzie stabilna.

Czy uÅ¼ywasz TypeScript czy JavaScript? Chcesz teÅ¼ testowaÄ‡ komponenty z plikami CSS/SCSS?
